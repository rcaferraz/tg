\chapter{Fundamentos do funcionamento e infraestrutura da Internet}
\begin{minipage}[t][10\baselineskip][t]{\linewidth}
\begin{epigraph}[Profiles Of The Future: An Inquiry into the Limits of the Possible, 1958]{Arthur C. Clarke}
Any sufficiently advanced technology is indistinguishable from magic.
\end{epigraph}
\end{minipage}

%Devido à sua organização descentralizada, a Internet é uma plataforma de comunicação mais robusta a desastres do que os seus antecessores telefonia, rádio e TV. Para quaisquer desses serviços ficarem indisponíveis, basta que se destrua sua respectiva torre de transmissão, no caso de rádio e TV, ou central de comutação no caso dos telefones. Essa maior robustez da Internet, entre outras novidades, acabou gerando uma propaganda em seu favor, no início da sua popularização, que chegou ao ponto de classificá-la erroneamente como incensurável em \cite{time-dewitt}. Para o leitor ter uma visão mais crítica sobre o que se veicula nos meios de comunicação e entender melhor o que será apresentado neste trabalho, este capítulo irá resumir os conceitos básicos que tangem o funcionamento da Internet e sua infraestrutura.

Neste capítulo, será explicado de forma simplificada o funcionamento da rede que nos conecta a bilhões de outras pessoas todos os dias. Primeiro, será apresentada uma analogia com um serviço postal, para explicar como os dados são transmitidos pela rede, e as pequenas diferenças para um correio normal, que a tornam um meio de comunicação facilmente susceptível a vigilância e censura. Em seguida, serão apresentadas algumas definições necessárias para o entendimento do trabalho.

\section{Analogia com serviço postal}

A Internet funciona como o serviço de um correio. Cada encomenda possui um certo conteúdo e deve apresentar uma etiqueta contendo o endereço do remetente e o endereço destino. Antes de chegar ao destino final, os pacotes da Internet precisam passar por diversas agências e centros de distribuição. Neste correio, no entanto, o conteúdo das encomendas não é protegido. Qualquer elemento que participe da entrega pode ver o conteúdo, armazenar cópias, e o mesmo pode ser feito com a etiqueta contendo os endereços. Na verdade, muitos governos exigem que os responsáveis pelo trânsito destas "encomendas" copiem e armazenem esses dados por um tempo mínimo, para possíveis investigações policiais futuras.

Qualquer ponto que participe do reencaminhamento de pacotes, portanto, pode ser utilizado como elemento atuador de uma política de censura e vigilância. Para censurar, basta descartar pacotes que possuam conteúdo considerado inapropriado. Ou então, apenas a partir das informações da etiqueta, pode-se descartar mensagens remetidas por endereços específicos, ou endereçadas a tais destinos. Já a vigilância pode ser praticada com a simples gravação dos dados, instalando uma espécie de gravador em um ponto de convergência de mensagens (centros de recebimento e reenvio).

\section{O uso da criptografia}
Infelizmente não são apenas as entidades envolvidas no tráfego dos dados que têm a chance de visualizar todo o conteúdo transmitido na rede. Os "piratas de computador", com toda sua expertise em computação e segurança, sem muita dificuldade encontram brechas de segurança e conseguem interceptar estes pacotes sem serem notados. Para contornar este problema, foram desenvolvidas soluções que tornam a mensagem legível apenas para o receptor. Estas soluções se baseiam no conceito de criptografia, ... Na criptografia moderna, a mensagem é escondida de forma automatizada com uma complexidade muito maior, dificultando bastante até mesmo os computadores. Pode-se dizer que uma forma de criar leis, é implementá-las em forma de programas. A confidencialidade de correspondências pode ser garantida, caso se utilize a criptografia.

\section{Pacotes IP}

Outra diferença para um correio normal é que os carteiros, ou veículos que levam as encomendas, só são capazes de levar pacotes bem pequenos. Então, na maioria das vezes, o conteúdo a ser enviado é dividido em pacotes menores e enviados separadamente. Ao chegar no destinatário, o conteúdo das frações da encomenda são reunidos, formando-se o dado enviado originalmente.

Para tornar possível a comunicação e o entendimento entre diversos tipos de dispositivos em uma mesma rede, foi necessário estabelecer e publicar certos padrões. Estes padrões compõem o chamado protocolo de comunicação IP (Internet Protocol) e determinam o formato das mensagens contidas nos pacotes, ou seja, como posicionar . Estes padrões determinam como ordenar , como a posição do endereço destino na mensagem, o endereço remetente, o dado a ser enviado, entre outros campos). A sigla IP também é utilizada para se referir ao endereço que identifica cada participante da rede IP (outro nome para a Internet). Na etiqueta deste correio, os endereços destino e remetente não possuem nomes de ruas, nem bairros, nem cidades. Os endereços IP são formados por quatro números concatenados, separados por pontos, como por exemplo 128.0.0.1.

Os pacotes trocados via Internet podem transportar vários tipos de dados: o texto de um e-mail, um vídeo do \emph{Youtube}, a senha da sua conta do \emph{Facebook} depois de você clicar em "Entrar", ou seja, tudo que trafega na rede são transformados em zeros e uns e enviados através destes pacotes.


Logo, quando enviamos um pacote a partir do nosso computador, este pacote acompanha nosso endereço IP, o endereço IP do destinatário e o dado que será recebido por ele. Todas estas informações são lidas por diversos dispositivos que são responsáveis por encaminhar nosso pacote até o destino. Estes dispositivos muitas vezes armazenam todos estes dados por longos períodos, mesmo que não interfira no.

\subsection{Como funciona a Web}
Para acessar um Website, o Google por exemplo, primeiro é enviada uma "encomenda" ao computador (também chamado de servidor) que contém a página procurada. O conteúdo da encomenda é um pedido, requisitando a página inicial. O Website então envia de volta outra encomenda, contendo a página, que ao chegar no computador, é exibida ao usuário. Quando o usuário clica em algum link do site, uma nova requisição é enviada, que por sua vez é respondida novamente com outra página. A navegação na Web funciona basicamente desta forma: requisições dos usuários e respostas dos servidores Web, em forma de páginas.

No entanto, para o correio entregar os pacotes, ele precisa do endereço IP (é assim que se chamam os endereços neste correio). Este endereço é formado apenas por alguns números. Não há nomes, nem ruas, nem cidades neste endereço.

Como ficaria difícil decorar os números dos endereços IP de todos os seus Websites favoritos, foi criada uma espécie de agenda de endereços, compartilhada em todo o mundo, que contém URLs (\emph{Universal Resource Location}) associados a endereços IP. Assim, em vez de decorarmos que o endereço do Google é 74.125.234.240, basta que decoremos o nome \emph{www.google.com}. Nosso \emph{browser} fica encarregado de consultar essa tabela e transformar o nome \emph{www.google.com} em um endereço IP. Esta tabela é fornecida por servidores específicos, conhecidos como Servidor DNS.

\section{Conceitos básicos}

%Fonte: http://www.ptt.br/documentacao

\paragraph*{Provedor de Acesso Serviços e Informações da Rede Internet (Internet Service Provider - ISP).}
	Garante que um indivíduo tenha acesso a toda a Internet e, para o caso de provedores de conteúdo, garantir que outros usuários possam visualizar seus serviços disponibilizados na rede.
	
\paragraph*{Autonomous Systems (ASs).}
	Todo ISP possui uma rede e caso esta rede possa adotar suas próprias políticas de administração de rede e seja registrada na LACNIC, ele terá responsabilidade pela sua rede e passará a ser um AS (Autonomous System), com um ASN (Autonomous System Number) que o identificará.

\paragraph*{Peering.}
	Para um cliente de um AS poder acessar o conteúdo de um cliente de outro AS, é necessário que exista uma conexão entre estes AS. Uma conexão direta entre os ASs é chamada de peering.

\paragraph*{Trânsito.}
	Uma forma de um AS fornecer acesso a vários outros ASs para seus clientes, seria fazer Peering com todos os outros ASs. No entanto há mais de 10000 ASs independentes no mundo, então torna-se inviável que um AS se conecte diretamente a todos os outros.

	Caso uma rede AS1 queira se conectar com outra rede AS2, não é necessário que crie um peering (conexão direta) entre elas. A rede AS1 pode negociar com uma terceira rede AS3, que já possui Peering com a AS2, e pedir para usar a rede AS3 para ganhar acesso a AS2. O uso de uma ou várias redes ASs para alcançar uma rede destino é chamada de trânsito.

\paragraph*{Tier One peer.}
	Poucos ASs no mundo tem acesso a toda a Internet, mas não pagam por "trânsito" a nenhum outro ISP. Eles fazem "peering" com todos os "tier one" e vendem trânsito para os outros ISPs (ASs menores).

	Portanto, para ter acesso a toda a Internet, ou o seu ISP ou um de seus "up-stream provider" terá conexão com pelo menos um "tier one".

\paragraph*{Peering privado e Ponto de Troca de Tráfego.}
	Se você não for um Tier One, obrigatoriamente terá que pagar por trânsito a algum outro AS para ter acesso a toda a Internet. No entanto, se você possuir Peering com algum AS, você economiza, pois esta conexão não passa por nenhum atravessador e você não precisa pagar por ela, apenas o custo de manutenção do link. Portanto, peering é de interesse de qualquer AS, pequeno ou grande.

	Peering pode ser feito um a um, via interconexão direta (peering privado) ou através de um ponto de troca de tráfego (PTT), um local com uma infraestrutura compartilhada, onde os ISPs se juntam para interconectar suas redes. No caso, cada ISP pagará pelo uso dessa infraestrutura, mas não estarão pagando por trânsito, uma vez que estão conectados diretamente aos ASs que participam deste PTT.

	Idealmente, existe no máximo um PTT em uma metrópole.

\paragraph*{Ponto de Troca de Tráfego (PTT) ou Internet Exchange Point (IXP).}
	Infraestrutura necessária para a interconexão direta entre as redes (Autonomous Systems -  ASSs).


\subsection{Subseção a}
\lipsum[1]

\subsubsection{Subsubseção I}
\lipsum[1]

\subsection{Subseção b}
\lipsum[1]

