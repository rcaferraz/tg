\chapter{Fundamentos do funcionamento e infraestrutura da Internet}
\begin{minipage}[t][10\baselineskip][t]{\linewidth}
\begin{epigraph}[Profiles Of The Future: An Inquiry into the Limits of the Possible, 1958]{Arthur C. Clarke}
Any sufficiently advanced technology is indistinguishable from magic.
\end{epigraph}
\end{minipage}

%Devido à sua organização descentralizada, a Internet é uma plataforma de comunicação mais robusta a desastres do que os seus antecessores telefonia, rádio e TV. Para quaisquer desses serviços ficarem indisponíveis, basta que se destrua sua respectiva torre de transmissão, no caso de rádio e TV, ou central de comutação no caso dos telefones. Essa maior robustez da Internet, entre outras novidades, acabou gerando uma propaganda em seu favor, no início da sua popularização, que chegou ao ponto de classificá-la erroneamente como incensurável em \cite{time-dewitt}. Para o leitor ter uma visão mais crítica sobre o que se veicula nos meios de comunicação e entender melhor o que será apresentado neste trabalho, este capítulo irá resumir os conceitos básicos que tangem o funcionamento da Internet e sua infraestrutura.

Neste capítulo, será explicado de forma simplificada o funcionamento da rede que nos conecta a bilhões de outras pessoas todos os dias. Primeiro, será apresentada uma analogia com um serviço postal, para explicar como os dados são transmitidos pela rede, e as pequenas diferenças para um correio normal, que a tornam um meio de comunicação facilmente susceptível a vigilância e censura. Em seguida, serão apresentadas algumas definições necessárias para o entendimento do trabalho.

\section{Analogia com serviço postal}

A Internet funciona como o serviço de um correio. Cada encomenda possui um certo conteúdo e deve apresentar uma etiqueta contendo o endereço do remetente e o endereço destino. Antes de chegar ao destino final, os pacotes da Internet precisam passar por diversas agências e centros de distribuição. Neste correio, no entanto, o conteúdo das encomendas não é protegido. Qualquer elemento que participe da entrega pode ver o conteúdo, armazenar cópias, e o mesmo pode ser feito com a etiqueta contendo os endereços. Na verdade, muitos governos exigem que os responsáveis pelo trânsito destas "encomendas" copiem e armazenem esses dados por um tempo mínimo, para possíveis investigações policiais futuras.

Qualquer ponto que participe do reencaminhamento de pacotes, portanto, pode ser utilizado como elemento atuador de uma política de censura e vigilância. Para censurar, basta descartar pacotes que possuam conteúdo considerado inapropriado. Ou então, apenas a partir das informações da etiqueta, pode-se descartar mensagens remetidas por endereços específicos, ou endereçadas a tais destinos. Já a vigilância pode ser praticada com a simples gravação dos dados, instalando uma espécie de gravador em um ponto de convergência de mensagens (centros de recebimento e reenvio).

\section{O uso da criptografia na Internet}
Infelizmente não são apenas as entidades envolvidas no tráfego dos dados que têm a chance de visualizar todo o conteúdo transmitido na rede. Os "piratas de computador", com toda sua expertise em computação e segurança, sem muita dificuldade encontram brechas de segurança e conseguem interceptar esses pacotes sem serem notados. Esses piratas podem ser criminosos, tentando auferir lucro a partir de informações como dados do cartão de crédito, ou podem ser espiões contratados para obter informações sigilosas de indivíduos, empresas ou governos. Para contornar esse problema, foram desenvolvidas soluções que têm como objetivo tornar a mensagem ilegível para leitores não autorizados. Apenas o destinatário é capaz de tornar a mensagem legível. Essas soluções se baseiam nos conceitos da criptografia, que existem há milênios, desde que o ser humano sentiu a necessidade de ocultar mensagens a indivíduos indesejados.

\section{Pacotes IP}
Outra diferença para um correio normal é que os carteiros, ou veículos que levam as encomendas, só são capazes de levar pacotes bem pequenos. Então, quase sempre o conteúdo a ser enviado é dividido em pacotes menores e enviados separadamente. Ao chegar no destinatário, o conteúdo das frações da encomenda são reunidos, formando-se o dado enviado originalmente.

Para tornar possível a comunicação e o entendimento entre diversos tipos de dispositivos em uma mesma rede, foi necessário estabelecer certos padrões. Estes padrões compõem o chamado protocolo de comunicação IP (Internet Protocol) e determinam o formato das mensagens transmitidas. Essas mensagens são digitais, ou seja, são formadas apenas por números. Não há etiquetas físicas, nem caixas, como num correio real. Na Internet, o endereço remetente é um número, o endereço destino é outro, e o conteúdo a ser enviado são mais números. Estes números são enviados em sequência e não há espaços, nem divisórias entre eles. Portanto, é preciso que o emissor e receptor combinem que informação vem primeiro e qual o comprimento de cada uma. O protocolo IP define isso. A sigla IP também é utilizada para se referir ao endereço que identifica cada participante da rede IP (outro nome para a Internet). Como dito anteriormente, os endereços são formados apenas por números. O comprimento do endereço IP é 32 bits, ou 4 bytes e pode ser representado como 4 bytes separados por pontos. Como um byte pode guardar valores de 0 a 255, então os endereços IP variam de 0.0.0.0 a 255.255.255.255.

Tudo que é acessível via Internet precisa ter um endereço IP. O Facebook possui um, o Youtube possui outro, e você, para acessá-los, também precisa de um.

Os pacotes trocados via Internet podem transportar vários tipos de dados: o texto de um e-mail, um vídeo do \emph{Youtube}, a senha da sua conta do \emph{Facebook} depois de você clicar em "Entrar", ou seja, tudo que trafega na rede são transformados em zeros e uns e enviados através destes pacotes. Ao chegar no destino, estes zeros e uns são reconvertidos para o tipo de conteúdo original, seja o texto de e-mail ou vídeo do Youtube.

Logo, quando enviamos um pacote a partir do nosso computador, este pacote acompanha nosso endereço IP, o endereço IP do destinatário e o dado que será recebido por ele. Todas estas informações são lidas por diversos dispositivos que são responsáveis por encaminhar nosso pacote até o destino. Estes dispositivos muitas vezes armazenam todos estes dados por longos períodos.

\subsection{Como funciona a Web e servidores de nomes} \label{subsec:HowWebAndDNSWorks}
Para acessar um Website, primeiro é enviado um pacote ao computador (também chamado de servidor) que contém a página procurada. O conteúdo deste pacote é um pedido, requisitando a página inicial. O Website então responde com outros pacotes, contendo a página, que ao chegar no computador do internauta, é exibida no navegador. Quando o usuário clica em algum link do site, uma nova requisição é enviada, que por sua vez é respondida novamente com outra página. A navegação na Web funciona basicamente desta forma: requisições dos usuários e respostas dos servidores Web, em forma de páginas.

No entanto, para o correio entregar os pedidos de página do usuário, ele precisa do endereço IP destino. Este endereço é formado apenas por alguns números. Não há nomes, nem ruas, nem cidades neste endereço.

Como ficaria difícil para os internautas decorar os números dos endereços IP de todos os seus Websites favoritos, foi criada uma espécie de agenda de endereços, compartilhada em todo o mundo, que contém URLs (\emph{Universal Resource Location}) associados a endereços IP. Assim, em vez de decorarmos que o endereço do Google é 74.125.234.240, basta que decoremos sua URL: \emph{www.google.com}. Quando digitamos uma URL no nosso navegador, ele fica encarregado de consultar essa agenda e transformar o nome \emph{www.google.com} em um endereço IP, para poder mandar o pacote com esse endereço. Essa agenda é armazenada em servidores conhecidos como Servidor DNS (\emph{Domain Name System}) ou Servidor de Nomes. Como é de se esperar, os Servidores DNS também possuem um endereço IP, e se o usuário desejar, pode configurar qual servidor DNS será utilizado. Todavia, não há necessidade de ficar trocando o Servidor DNS, visto que todos devem responder da mesma forma. A agenda de nomes e endereços deve ser idêntica para todos conectados na Web.

\section{Conceitos básicos}

%Fonte: http://www.ptt.br/documentacao

\paragraph*{Provedor de Acesso Serviços e Informações da Rede Internet (Internet Service Provider - ISP).}
	Garante que um indivíduo tenha acesso a toda a Internet e, para o caso de provedores de conteúdo, garantir que outros usuários possam visualizar seus serviços disponibilizados na rede.
	
\paragraph*{Autonomous Systems (ASs).}
	Todo ISP possui uma rede e caso esta rede possa adotar suas próprias políticas de administração de rede e seja registrada na LACNIC, ele terá responsabilidade pela sua rede e passará a ser um AS (Autonomous System), com um ASN (Autonomous System Number) que o identificará.

\paragraph*{Peering.}
	Para um cliente de um AS poder acessar o conteúdo de um cliente de outro AS, é necessário que exista uma conexão entre estes AS. Uma conexão direta entre os ASs é chamada de peering.

\paragraph*{Trânsito.}
	Uma forma de um AS fornecer acesso a vários outros ASs para seus clientes, seria fazer Peering com todos os outros ASs. No entanto há mais de 10000 ASs independentes no mundo, então torna-se inviável que um AS se conecte diretamente a todos os outros.

	Caso uma rede AS1 queira se conectar com outra rede AS2, não é necessário que crie um peering (conexão direta) entre elas. A rede AS1 pode negociar com uma terceira rede AS3, que já possui Peering com a AS2, e pedir para usar a rede AS3 para ganhar acesso a AS2. O uso de uma ou várias redes ASs para alcançar uma rede destino é chamada de trânsito.

\paragraph*{Tier One peer.}
	Poucos ASs no mundo tem acesso a toda a Internet, mas não pagam por "trânsito" a nenhum outro ISP. Eles fazem "peering" com todos os "tier one" e vendem trânsito para os outros ISPs (ASs menores).

	Portanto, para ter acesso a toda a Internet, ou o seu ISP ou um de seus "up-stream provider" terá conexão com pelo menos um "tier one".

\paragraph*{Peering privado e Ponto de Troca de Tráfego.}
	Se você não for um Tier One, obrigatoriamente terá que pagar por trânsito a algum outro AS para ter acesso a toda a Internet. No entanto, se você possuir Peering com algum AS, você economiza, pois esta conexão não passa por nenhum atravessador e você não precisa pagar por ela, apenas o custo de manutenção do link. Portanto, peering é de interesse de qualquer AS, pequeno ou grande.

	Peering pode ser feito um a um, via interconexão direta (peering privado) ou através de um ponto de troca de tráfego (PTT), um local com uma infraestrutura compartilhada, onde os ISPs se juntam para interconectar suas redes. No caso, cada ISP pagará pelo uso dessa infraestrutura, mas não estarão pagando por trânsito, uma vez que estão conectados diretamente aos ASs que participam deste PTT.

	Idealmente, existe no máximo um PTT em uma metrópole.

\paragraph*{Ponto de Troca de Tráfego (PTT) ou Internet Exchange Point (IXP).}
	Infraestrutura necessária para a interconexão direta entre as redes (Autonomous Systems -  ASSs).


\subsection{Subseção a}
\lipsum[1]

\subsubsection{Subsubseção I}
\lipsum[1]

\subsection{Subseção b}
\lipsum[1]

